<?xml version="1.0" encoding="UTF-8"?>
<!--
**************************************************************************

Checklist: Before Starting Engines

Copyright (c) 2015 Richard Senior

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

**************************************************************************
-->

<PropertyList>

  <title>Before Starting Engines</title>

  <!-- Magnetos - OFF -->
  <item>
    <name>Magnetos</name>
    <value>OFF</value>
    <condition>
      <equals>
        <property>controls/engines/engine/magnetos</property>
        <value>0</value>
      </equals>
    </condition>
    <binding>
      <command>nasal</command>
      <script>
        pup.select_magnetos(pup.Magnetos.OFF);
      </script>
    </binding>
  </item>

  <!-- Parking Brake - ON -->
  <item>
    <name>Parking Brake</name>
    <value>ON</value>
    <condition>
      <equals>
        <property>controls/gear/brake-parking</property>
        <value>1</value>
      </equals>
    </condition>
    <binding>
      <command>property-assign</command>
      <property>controls/gear/brake-parking</property>
      <value>1</value>
    </binding>
  </item>

  <!-- Main Battery - ON -->
  <item>
    <name>Main Battery</name>
    <value>ON</value>
    <condition>
      <or>
        <and>
          <property>sim/checklists/status/nav-lights</property>
          <property>sim/checklists/status/beacon</property>
        </and>
        <greater-than>
          <property>systems/electrical/outputs/bus-dc</property>
          <value>6</value>
        </greater-than>
      </or>
    </condition>
    <binding>
      <command>property-assign</command>
      <property>controls/electric/battery-switch</property>
      <value>1</value>
    </binding>
    <binding>
      <command>nasal</command>
      <script>pup.click();</script>
    </binding>
  </item>

  <!-- Fuel Quantity - CHECK -->
  <item>
    <name>Fuel Quantity</name>
    <value>CHECK</value>
    <binding>
      <command>nasal</command>
      <script>pup.show_weight_dialog();</script>
    </binding>
  </item>

  <!-- Navigation Lights - ON -->
  <item>
    <name>Navigation Lights</name>
    <value>ON and CHECK</value>
    <condition>
      <or>
        <property>sim/checklists/status/nav-lights</property>
        <greater-than>
          <property>systems/electrical/outputs/nav-lights</property>
          <value>0</value>
        </greater-than>
      </or>
    </condition>
    <binding>
      <command>property-assign</command>
      <property>controls/switches/circuit-breakers/landtaxi-nav</property>
      <value>1</value>
    </binding>
    <binding>
      <command>nasal</command>
      <script>pup.click();</script>
    </binding>
  </item>

  <!-- Beacon - ON -->
  <item>
    <name>Beacon</name>
    <value>ON and CHECK</value>
    <condition>
      <or>
        <property>sim/checklists/status/beacon</property>
        <greater-than>
          <property>systems/electrical/outputs/beacon</property>
          <value>0</value>
        </greater-than>
      </or>
    </condition>
    <binding>
      <command>property-assign</command>
      <property>controls/switches/circuit-breakers/beacon</property>
      <value>1</value>
    </binding>
    <binding>
      <command>nasal</command>
      <script>pup.click();</script>
    </binding>
  </item>

  <!-- Beacon - OFF -->
  <item>
    <name>Beacon</name>
    <value>OFF</value>
    <condition>
      <and>
        <property>sim/checklists/status/beacon</property>
        <less-than>
          <property>systems/electrical/outputs/beacon</property>
          <value>1</value>
        </less-than>
      </and>
    </condition>
    <binding>
      <command>property-assign</command>
      <property>controls/switches/circuit-breakers/beacon</property>
      <value>0</value>
    </binding>
    <binding>
      <command>nasal</command>
      <script>pup.click();</script>
    </binding>
  </item>

  <!-- Main Battery - OFF -->
  <item>
    <name>Main Battery</name>
    <value>OFF</value>
    <condition>
      <less-than>
        <property>systems/electrical/outputs/bus-dc</property>
        <value>6</value>
      </less-than>
    </condition>
    <binding>
      <command>property-assign</command>
      <property>controls/electric/battery-switch</property>
      <value>0</value>
    </binding>
    <binding>
      <command>nasal</command>
      <script>pup.click();</script>
    </binding>
  </item>

  <!-- Refuel -->
  <item>
    <name>Refuel</name>
    <value>AS REQUIRED</value>
    <binding>
      <command>nasal</command>
      <script>pup.show_weight_dialog();</script>
    </binding>
  </item>

</PropertyList>
