<?xml version="1.0" encoding="UTF-8"?>
<!--
**************************************************************************

Checklist: Start Engines

Copyright (c) 2015 Richard Senior

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

**************************************************************************
-->

<PropertyList>

  <title>Start Engines</title>

  <!-- Magnetos - OFF -->
  <item>
    <name>Magnetos</name>
    <value>OFF</value>
    <condition>
      <or>
        <property>engines/engine/running</property>
        <equals>
          <property>controls/engines/engine/magnetos</property>
          <value>0</value>
        </equals>
      </or>
    </condition>
    <binding>
      <command>magnetos-off</command>
    </binding>
  </item>

  <!-- Parking Brake - ON -->
  <item>
    <name>Parking Brake</name>
    <value>ON</value>
    <condition>
      <equals>
        <property>controls/gear/brake-parking</property>
        <value>1</value>
      </equals>
    </condition>
    <binding>
      <command>property-assign</command>
      <property>controls/gear/brake-parking</property>
      <value>1</value>
    </binding>
  </item>

  <!-- Carb Heat - COLD -->
  <item>
    <name>Carb Heat</name>
    <value>COLD</value>
    <condition>
      <or>
        <less-than>
          <property>controls/anti-ice/engine/carb-heat-norm</property>
          <value>0.05</value>
        </less-than>
        <property>engines/engine/running</property>
      </or>
    </condition>
    <binding>
      <command>property-interpolate</command>
      <property>controls/anti-ice/engine/carb-heat-norm</property>
      <value>0.0</value>
      <rate>1.0</rate>
    </binding>
  </item>

  <!-- Fuel Tank Selector - BOTH -->
  <item>
    <name>Fuel Tank Selector</name>
    <value>BOTH</value>
    <condition>
      <and>
        <property>consumables/fuel/tank[1]/selected</property>
        <property>consumables/fuel/tank[2]/selected</property>
      </and>
    </condition>
    <binding>
      <command>tank-select-both</command>
    </binding>
  </item>

  <!-- Mixture - FULL RICH -->
  <item>
    <name>Mixture</name>
    <value>FULL RICH</value>
    <condition>
      <greater-than>
        <property>controls/engines/engine/mixture</property>
        <value>0.95</value>
      </greater-than>
    </condition>
    <binding>
      <command>property-interpolate</command>
      <property>controls/engines/engine/mixture</property>
      <value>1</value>
      <rate>0.5</rate>
    </binding>
  </item>

  <!-- Circuit Breakers - ALL IN -->
  <item>
    <name>Circuit Breakers (ex. Beacon/Pitot)</name>
    <value>ALL IN</value>
    <condition>
      <and>
        <property>controls/switches/circuit-breakers/adf</property>
        <property>controls/switches/circuit-breakers/alt</property>
        <property>controls/switches/circuit-breakers/alt-field</property>
        <property>controls/switches/circuit-breakers/am-dg</property>
        <property>controls/switches/circuit-breakers/ap</property>
        <property>controls/switches/circuit-breakers/comm</property>
        <property>controls/switches/circuit-breakers/dme</property>
        <property>controls/switches/circuit-breakers/flaps</property>
        <property>controls/switches/circuit-breakers/landtaxi-nav</property>
        <property>controls/switches/circuit-breakers/lvrelay-fuelconts</property>
        <property>controls/switches/circuit-breakers/pilot1flood</property>
        <property>controls/switches/circuit-breakers/pilot2flood</property>
        <property>controls/switches/circuit-breakers/stallwarning-boostpump</property>
        <property>controls/switches/circuit-breakers/tb</property>
        <property>controls/switches/circuit-breakers/txp</property>
      </and>
    </condition>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/adf</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/alt</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/alt-field</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/am-dg</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/ap</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/comm</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/dme</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/flaps</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/landtaxi-nav</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/lvrelay-fuelconts</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/pilot1flood</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/pilot2flood</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/stallwarning-boostpump</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/tb</property>
      <value>1</value>
    </binding>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/txp</property>
      <value>1</value>
    </binding>
  </item>

  <!-- Prime with Throttle - 1 to 4 STROKES -->
  <item>
    <name>Prime (with throttle)</name>
    <value>1-4 STROKES</value>
    <condition>
      <or>
        <property>engines/engine/running</property>
        <greater-than-equals>
          <property>fdm/jsbsim/propulsion/engine/prime-norm</property>
          <property>fdm/jsbsim/propulsion/engine/prime-min</property>
        </greater-than-equals>
      </or>
    </condition>
    <binding>
      <!-- Instant priming -->
      <command>property-assign</command>
      <property>fdm/jsbsim/propulsion/engine/prime-norm</property>
      <value>1.0</value>
    </binding>
  </item>

  <!-- Open Throttle - 1/4 -->
  <item>
    <name>Throttle</name>
    <value>APPROX 1/4</value>
    <condition>
      <or>
        <property>engines/engine/running</property>
        <and>
          <greater-than>
            <property>controls/engines/engine/throttle</property>
            <value>0.1</value>
          </greater-than>
          <less-than>
            <property>controls/engines/engine/throttle</property>
            <value>0.5</value>
          </less-than>
        </and>
      </or>
    </condition>
    <binding>
      <command>property-interpolate</command>
      <property>controls/engines/engine/throttle</property>
      <value>0.25</value>
      <rate>0.5</rate>
    </binding>
  </item>

  <!-- Main Battery - ON -->
  <item>
    <name>Main Battery</name>
    <value>ON</value>
    <condition>
      <greater-than>
        <property>systems/electrical/outputs/bus-dc</property>
        <value>6</value>
      </greater-than>
    </condition>
    <binding>
      <command>switch-assign</command>
      <property>controls/electric/battery-switch</property>
      <value>1</value>
    </binding>
  </item>

  <!-- Navigation Lights - ON -->
  <item>
    <name>Navigation Lights</name>
    <value>ON</value>
    <condition>
      <greater-than>
        <property>systems/electrical/outputs/nav-lights</property>
        <value>0</value>
      </greater-than>
    </condition>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/landtaxi-nav</property>
      <value>1</value>
    </binding>
  </item>

  <!-- Alternator - ON -->
  <item>
    <name>Alternator</name>
    <value>ON</value>
    <condition>
      <equals>
        <property>controls/electric/engine/generator</property>
        <value>1</value>
      </equals>
    </condition>
    <binding>
      <command>switch-assign</command>
      <property>controls/electric/engine/generator</property>
      <value>1</value>
    </binding>
  </item>

  <!-- Starter Master - ON -->
  <item>
    <name>Starter Master</name>
    <value>ON</value>
    <condition>
      <or>
        <property>systems/electrical/outputs/starter</property>
        <property>engines/engine/running</property>
      </or>
    </condition>
    <binding>
      <command>switch-assign</command>
      <property>controls/electric/engine/starter-master</property>
      <value>1</value>
    </binding>
  </item>

  <!-- Boost Pump - ON -->
  <item>
    <name>Boost Pump</name>
    <value>ON</value>
    <condition>
      <or>
        <property>engines/engine/running</property>
        <greater-than>
          <property>systems/electrical/outputs/fuel-pump</property>
          <value>0</value>
        </greater-than>
      </or>
    </condition>
    <binding>
      <command>switch-assign</command>
      <property>controls/electric/engine/fuel-pump</property>
      <value>1</value>
    </binding>
  </item>

  <!-- Magnetos - BOTH -->
  <item>
    <name>Magnetos</name>
    <value>BOTH</value>
    <condition>
      <equals>
        <property>controls/engines/engine/magnetos</property>
        <value>3</value>
      </equals>
    </condition>
    <binding>
      <command>magnetos-both</command>
    </binding>
  </item>

  <!-- Propeller - CLEAR -->
  <item>
    <name>Propeller</name>
    <value>CLEAR</value>
  </item>

  <!-- Beacon - ON -->
  <item>
    <name>Beacon</name>
    <value>ON</value>
    <condition>
      <greater-than>
        <property>systems/electrical/outputs/beacon</property>
        <value>0</value>
      </greater-than>
    </condition>
    <binding>
      <command>switch-assign</command>
      <property>controls/switches/circuit-breakers/beacon</property>
      <value>1</value>
    </binding>
  </item>

  <!-- Engine - START -->
  <item>
    <name>Engine</name>
    <value>START</value>
    <condition>
      <property>engines/engine/running</property>
    </condition>
    <binding>
      <command>start-engine</command>
    </binding>
  </item>

  <!-- Carb Heat - AS REQUIRED -->
  <item>
    <name>Carb Heat</name>
    <value>AS REQUIRED</value>
    <condition>
      <and>
        <property>engines/engine/running</property>
        <greater-than>
          <property>controls/anti-ice/engine/carb-heat-norm</property>
          <value>0.05</value>
        </greater-than>
      </and>
    </condition>
    <binding>
      <command>property-interpolate</command>
      <property>controls/anti-ice/engine/carb-heat-norm</property>
      <value>1.0</value>
      <rate>1.0</rate>
    </binding>
  </item>

  <!-- Throttle - TICK OVER -->
  <item>
    <name>Tick Over</name>
    <value>800-1000 RPM</value>
    <condition>
      <or>
        <property>sim/checklists/auto/active</property>
        <and>
          <greater-than>
            <property>engines/engine/rpm</property>
            <value>800</value>
          </greater-than>
          <less-than>
            <property>engines/engine/rpm</property>
            <value>1000</value>
          </less-than>
        </and>
      </or>
    </condition>
    <binding>
      <command>property-interpolate</command>
      <property>controls/engines/engine/throttle</property>
      <value>0.28</value>
      <rate>0.5</rate>
    </binding>
  </item>

  <!-- Oil Pressure - CHECK -->
  <item>
    <name>Oil Pressure</name>
    <value>MINIMUM 25psi</value>
    <condition>
      <or>
        <property>sim/checklists/auto/active</property>
        <greater-than>
          <property>engines/engine/oil-pressure-psi</property>
          <value>25</value>
        </greater-than>
      </or>
    </condition>
  </item>

  <!-- Starter Master - OFF -->
  <item>
    <name>Starter Master</name>
    <value>OFF</value>
    <condition>
      <and>
        <property>engines/engine/running</property>
        <equals>
          <property>systems/electrical/outputs/starter</property>
          <value>0</value>
        </equals>
      </and>
    </condition>
    <binding>
      <command>switch-assign</command>
      <property>controls/electric/engine/starter-master</property>
      <value>0</value>
    </binding>
  </item>

  <!-- Boost Pump - OFF -->
  <item>
    <name>Boost Pump</name>
    <value>OFF</value>
    <condition>
      <and>
        <property>engines/engine/running</property>
        <equals>
          <property>systems/electrical/outputs/fuel-pump</property>
          <value>0</value>
        </equals>
      </and>
    </condition>
    <binding>
      <command>switch-assign</command>
      <property>controls/electric/engine/fuel-pump</property>
      <value>0</value>
    </binding>
  </item>

  <!-- Alternator Warning - OUT -->
  <item>
    <name>Alternator Warning</name>
    <value>OFF</value>
    <condition>
      <or>
        <property>sim/checklists/auto/active</property>
        <equals>
          <property>systems/electrical/outputs/generator-warn</property>
          <value>0</value>
        </equals>
      </or>
    </condition>
  </item>

  <!-- Transponder - STANDBY -->
  <item>
    <name>Transponder</name>
    <value>SBY</value>
    <condition>
      <equals>
        <property>instrumentation/transponder/inputs/knob-mode</property>
        <value>1</value>
      </equals>
    </condition>
    <binding>
      <command>property-assign</command>
      <property>instrumentation/transponder/inputs/knob-mode</property>
      <value>1</value>
    </binding>
  </item>

</PropertyList>
