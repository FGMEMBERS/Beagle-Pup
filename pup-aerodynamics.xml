<?xml version="1.0" encoding="UTF-8"?>
<!--
**************************************************************************

Beagle Pup Aerodynamics (JSBSim)

Copyright (c) 2015 Richard Senior

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

**************************************************************************
-->

<aerodynamics>

  <axis name="LIFT">

    <function name="aero/force/Lift_propwash">
      <description>Delta lift due to propeller induced velocity</description>
      <product>
        <property>propulsion/engine[0]/thrust-coefficient</property>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>tuning/propwash</property>
        <table>
          <independentVar lookup="row">aero/alpha-rad</independentVar>
          <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
          <tableData>
            0.0     60.0
            -0.25  0.000   0.000
            0.00  0.048   0.129
            0.20  0.229   0.610
            0.39  0.000   0.000
          </tableData>
        </table>
      </product>
    </function>

    <!-- Lift above 0.85 and below -0.85 is generalised -->
    <function name="aero/force/Lift_alpha">
      <description>Lift due to alpha</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <table>
          <independentVar lookup="row">aero/alpha-rad</independentVar>
          <tableData>
            -1.57  0.0000
            -1.22 -0.6062
            -1.05 -0.8167
            -0.88 -0.9431
            -0.64 -0.3783
            -0.21 -0.9457
            0.00  0.2532
            0.17  1.1988
            0.60  0.6314
            0.88  1.0569
            1.05  0.9153
            1.22  0.6794
            1.57  0.0000
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/force/Lift_pitch_rate">
      <description>Lift due to pitch rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>velocities/q-aero-rad_sec</property>
        <property>aero/ci2vel</property>
        <value> 8.0080 </value>
      </product>
    </function>

    <function name="aero/force/Lift_alpha_rate">
      <description>Lift due to alpha rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>aero/alphadot-rad_sec</property>
        <property>aero/ci2vel</property>
        <value> 3.1904 </value>
      </product>
    </function>

    <function name="aero/force/Lift_elevator">
      <description>Lift due to Elevator Deflection</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>fcs/elevator-pos-rad</property>
        <property>tuning/elevator</property>
        <value> 0.8618 </value>
      </product>
    </function>

    <function name="aero/force/Lift_flap">
      <description>Delta Lift due to flaps</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>fcs/flap-pos-deg</property>
        <property>tuning/flap</property>
        <value> 0.0123 </value>
      </product>
    </function>

  </axis>

  <axis name="DRAG">

    <!-- CD0 is based on fuselage, wing, horizontal- en vertical tail -->
    <!-- Antennas, struts and wires are not taken into account        -->
    <!-- CD for gear (fixed and retractable) is defined below         -->
    <function name="aero/force/Drag_minimum">
      <description>Minimum drag</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <value> 0.042 </value>
      </product>
    </function>

    <function name="aero/force/Drag_alpha">
      <description>Drag due to alpha</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <table>
          <independentVar lookup="row">aero/alpha-rad</independentVar>
          <tableData>
            -1.57    1.4118
            -0.17    0.0205
            0.00    0.0000
            0.17    0.0205
            1.57    1.4118
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/force/Drag_induced">
      <description>Induced drag</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>aero/cl-squared</property>
        <value> 0.0427 </value>
      </product>
    </function>

    <function name="aero/force/Drag_mach">
      <description>Drag due to mach</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <table>
          <independentVar lookup="row">velocities/mach</independentVar>
          <tableData>
            0.00    0.0000
            0.70    0.0000
            1.10    0.0230
            1.80    0.0150
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/force/Drag_beta">
      <description>Drag due to sideslip</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <table>
          <independentVar lookup="row">aero/beta-rad</independentVar>
          <tableData>
            -1.57    1.2300
            -0.26    0.0500
            0.00    0.0000
            0.26    0.0500
            1.57    1.2300
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/force/Drag_elevator">
      <description>Drag due to Elevator Deflection</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <abs><property>fcs/elevator-pos-rad</property></abs>
        <value> 0.0400 </value>
      </product>
    </function>

    <function name="aero/force/Drag_flap">
      <description>Drag due to flaps</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>fcs/flap-pos-deg</property>
        <property>tuning/flap</property>
        <value> 0.0009 </value>
      </product>
    </function>

  </axis>

  <axis name="SIDE">

    <function name="aero/force/Side_beta">
      <description>Side force due to beta</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>aero/beta-rad</property>
        <value> -1.0907 </value>
      </product>
    </function>

    <function name="aero/force/Side_roll_rate">
      <description>Side force due to roll rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>aero/bi2vel</property>
        <property>velocities/p-aero-rad_sec</property>
        <table>
          <independentVar lookup="row">aero/Re</independentVar>
          <tableData>
            2587887   0.2182
            2846676   0.0186
            3881831   0.0083
            5198011   0.0046
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/force/Side_yaw_rate">
      <description>Side force due to yaw rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>aero/bi2vel</property>
        <property>velocities/r-aero-rad_sec</property>
        <value> 0.8683 </value>
      </product>
    </function>

    <function name="aero/force/Side_rudder">
      <description>Side force due to rudder</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>fcs/rudder-pos-rad</property>
        <value> 0.3350 </value>
      </product>
    </function>

  </axis>

  <axis name="PITCH">

    <function name="aero/moment/Pitch_propwash">
      <description>Pitch moment due to propeller induced velocity</description>
      <product>
        <property>propulsion/engine[0]/thrust-coefficient</property>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>tuning/propwash</property>
        <table>
          <independentVar lookup="row">aero/alpha-rad</independentVar>
          <independentVar lookup="column">fcs/flap-pos-deg</independentVar>
          <tableData>
            0.0     60.0
            -0.01  0.000   0.000
            0.00 -0.048  -0.129
            0.20 -0.228  -0.609
            0.25  0.000   0.000
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/moment/Pitch_alpha">
      <description>Pitch moment due to alpha</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/cbarw-ft</property>
        <property>aero/alpha-rad</property>
        <value> -2.5895 </value>
      </product>
    </function>

    <function name="aero/moment/Pitch_elevator">
      <description>Pitch moment due to elevator</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/cbarw-ft</property>
        <property>fcs/elevator-pos-rad</property>
        <property>tuning/elevator</property>
        <table>
          <independentVar lookup="row">velocities/mach</independentVar>
          <tableData>
            0.0    -2.5963
            2.0    -0.6491
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/moment/Pitch_damp">
      <description>Pitch moment due to pitch rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/cbarw-ft</property>
        <property>aero/ci2vel</property>
        <property>velocities/q-aero-rad_sec</property>
        <property>tuning/pitch-damp</property>
        <value> -24.8673 </value>
      </product>
    </function>

    <function name="aero/moment/Pitch_alphadot">
      <description>Pitch moment due to alpha rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/cbarw-ft</property>
        <property>aero/ci2vel</property>
        <property>aero/alphadot-rad_sec</property>
        <value> -9.9073 </value>
      </product>
    </function>

  </axis>

  <axis name="ROLL">

    <function name="aero/moment/Roll_differential_propwash">
      <description>Roll moment due to differential propwash</description>
      <product>
        <property>propulsion/engine[0]/thrust-coefficient</property>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>aero/alpha-rad</property>
        <property>tuning/propwash</property>
        <value> 0.1478 </value>
      </product>
    </function>

    <function name="aero/moment/Roll_beta">
      <description>Roll moment due to beta</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>aero/beta-rad</property>
        <table>
          <independentVar lookup="row">aero/alpha-rad</independentVar>
          <independentVar lookup="column">aero/Re</independentVar>
          <tableData>
            2587887  2846676  3881831  5198011
            -0.0349  -0.4445  -0.1788  -0.1651  -0.1602
            0.3491  -0.5899  -0.2054  -0.1925  -0.1890
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/moment/Roll_damp">
      <description>Roll moment due to roll rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>aero/bi2vel</property>
        <property>velocities/p-aero-rad_sec</property>
        <property>tuning/roll-damp</property>
        <value> -0.3735 </value>
      </product>
    </function>

    <function name="aero/moment/Roll_yaw">
      <description>Roll moment due to yaw rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>aero/bi2vel</property>
        <property>velocities/r-aero-rad_sec</property>
        <table>
          <independentVar lookup="row">aero/alpha-rad</independentVar>
          <independentVar lookup="column">aero/Re</independentVar>
          <tableData>
            2587887  2846676  3881831  5198011
            -0.0349  -0.0141  -0.0141  -0.0141  -0.0141
            0.3491   2.9690   0.5294   0.5294   0.5294
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/moment/Roll_aileron">
      <description>Roll moment due to aileron</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>fcs/left-aileron-pos-rad</property>
        <table>
          <independentVar lookup="row">velocities/mach</independentVar>
          <tableData>
            0.0    0.1700
            2.0    0.0425
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/moment/Roll_rudder">
      <description>Roll moment due to rudder</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>fcs/rudder-pos-rad</property>
        <value> 0.0100 </value>
      </product>
    </function>

  </axis>

  <axis name="YAW">

    <!-- Stall initiator -->
    <function name="aero/moment/Yaw_alpha">
      <description>Yaw moment due to alpha</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>aero/alpha-rad</property>
        <property>fcs/gear-no-wow</property>
        <table>
          <independentVar lookup="row">aero/beta-rad</independentVar>
          <independentVar lookup="column">aero/Re</independentVar>
          <tableData>
            2587887  2846676
            -0.3491  -1.0000   0.0000
            0.3491   1.0000   0.0000
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/moment/Yaw_beta">
      <description>Yaw moment due to beta</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>aero/beta-rad</property>
        <value> 0.2086 </value>
      </product>
    </function>

    <function name="aero/moment/Yaw_roll_rate">
      <description>Yaw moment due to roll rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>aero/bi2vel</property>
        <property>velocities/p-rad_sec</property>
        <table>
          <independentVar lookup="row">aero/Re</independentVar>
          <tableData>
            2587887  -0.0868
            2846676  -0.0074
            3881831  -0.0033
            5198011  -0.0018
          </tableData>
        </table>
      </product>
    </function>

    <function name="aero/moment/Yaw_damp">
      <description>Yaw moment due to yaw rate</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>aero/bi2vel</property>
        <property>velocities/r-aero-rad_sec</property>
        <property>tuning/yaw-damp</property>
        <value> -0.1740 </value>
      </product>
    </function>

    <function name="aero/moment/Yaw_rudder">
      <description>Yaw moment due to rudder</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>fcs/rudder-pos-rad</property>
        <value> -0.1333 </value>
      </product>
    </function>

    <function name="aero/moment/Yaw_aileron">
      <description>Adverse yaw</description>
      <product>
        <property>aero/qbar-psf</property>
        <property>metrics/Sw-sqft</property>
        <property>metrics/bw-ft</property>
        <property>fcs/left-aileron-pos-rad</property>
        <value> -0.0100 </value>
      </product>
    </function>

  </axis>

</aerodynamics>
